<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è»½é‡ç‰ˆ Three.js ä½“é¨“ - å³åº§ã«å‹•ä½œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            overflow: hidden;
        }
        
        .main-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            height: 100vh;
        }
        
        .control-panel {
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }
        
        .panel-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: center;
            color: #4ecdc4;
            font-weight: bold;
        }
        
        .section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            backdrop-filter: blur(5px);
        }
        
        .section-title {
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 8px;
            font-size: 0.9em;
        }
        
        .button {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.75em;
            font-weight: bold;
            transition: transform 0.2s ease;
            width: 100%;
            margin-bottom: 4px;
        }
        
        .button:hover {
            transform: scale(1.02);
        }
        
        .button.active {
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%);
        }
        
        .scene-container {
            position: relative;
            background: #000;
        }
        
        #quickCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .overlay-info {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0, 0, 0, 0.8);
            padding: 12px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
            max-width: 250px;
        }
        
        .overlay-title {
            font-size: 1em;
            font-weight: bold;
            color: #4ecdc4;
            margin-bottom: 6px;
        }
        
        .overlay-description {
            font-size: 0.8em;
            line-height: 1.3;
            opacity: 0.9;
        }
        
        .controls-info {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.8);
            padding: 8px;
            border-radius: 6px;
            font-size: 0.7em;
            backdrop-filter: blur(10px);
        }
        
        .quick-start {
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%);
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
            font-size: 0.8em;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .quick-start:hover {
            transform: scale(1.05);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 16px;
            border-radius: 15px;
            font-size: 0.8em;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            border: 1px solid #4ecdc4;
        }
        
        .notification.show {
            opacity: 1;
        }
        
        .demo-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6px;
            margin: 8px 0;
        }
        
        .demo-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            font-size: 0.7em;
            transition: all 0.3s ease;
        }
        
        .demo-item:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .loading-spinner {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #4ecdc4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="control-panel">
            <h2 class="panel-title">âš¡ è»½é‡3Dä½“é¨“</h2>
            
            <div class="quick-start" onclick="startQuickDemo()">
                ğŸš€ ã™ãã«å§‹ã‚ã‚‹ï¼
            </div>
            
            <div class="section">
                <div class="section-title">ğŸ¯ ã‚¯ã‚¤ãƒƒã‚¯ãƒ‡ãƒ¢</div>
                <div class="demo-grid">
                    <div class="demo-item" onclick="showSofa()">
                        ğŸ›‹ï¸<br>ã‚½ãƒ•ã‚¡ä½“é¨“
                    </div>
                    <div class="demo-item" onclick="showCity()">
                        ğŸ™ï¸<br>éƒ½å¸‚æ¢ç´¢
                    </div>
                    <div class="demo-item" onclick="showRoom()">
                        ğŸ <br>éƒ¨å±‹è¨­è¨ˆ
                    </div>
                    <div class="demo-item" onclick="showFuture()">
                        ğŸš€<br>æœªæ¥ç©ºé–“
                    </div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">ğŸ® ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³</div>
                <button class="button" onclick="rotateView()">ğŸŒ€ è¦–ç‚¹å›è»¢</button>
                <button class="button" onclick="zoomIn()">ğŸ” ã‚ºãƒ¼ãƒ ã‚¤ãƒ³</button>
                <button class="button" onclick="zoomOut()">ğŸ” ã‚ºãƒ¼ãƒ ã‚¢ã‚¦ãƒˆ</button>
                <button class="button" onclick="resetView()">ğŸ¯ è¦–ç‚¹ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
            
            <div class="section">
                <div class="section-title">ğŸ¨ ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</div>
                <button class="button" onclick="changeColor()">ğŸŒˆ è‰²å¤‰æ›´</button>
                <button class="button" onclick="addAnimation()">âœ¨ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</button>
                <button class="button" onclick="toggleWireframe()">ğŸ”² ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ </button>
                <button class="button" onclick="addLighting()">ğŸ’¡ ç…§æ˜å¤‰æ›´</button>
            </div>
            
            <div class="section">
                <div class="section-title">ğŸ¤– Claudeé€£æº</div>
                <button class="button" onclick="generateCode()">ğŸ“ ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ</button>
                <button class="button" onclick="explainScene()">ğŸ’¬ ã‚·ãƒ¼ãƒ³èª¬æ˜</button>
                <button class="button" onclick="suggestImprovement()">ğŸ’¡ æ”¹å–„ææ¡ˆ</button>
            </div>
            
            <div style="background: rgba(76, 175, 80, 0.2); padding: 8px; border-radius: 6px; margin-top: 10px;">
                <div style="font-size: 0.75em; font-weight: bold; color: #4caf50; margin-bottom: 4px;">
                    âœ… å³åº§ã«å‹•ä½œ
                </div>
                <div style="font-size: 0.7em; opacity: 0.9;">
                    é‡ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã‚ãšã€<br>
                    è»½é‡ãªCanvas 2Dã§<br>
                    3Dé¢¨ä½“é¨“ã‚’å®Ÿç¾ï¼
                </div>
            </div>
        </div>
        
        <div class="scene-container">
            <canvas id="quickCanvas"></canvas>
            <div class="loading-spinner" id="loadingSpinner"></div>
            
            <div class="overlay-info" id="sceneInfo">
                <div class="overlay-title">ğŸ® è»½é‡3Dä½“é¨“</div>
                <div class="overlay-description">
                    Canvas 2Dã‚’ä½¿ã£ãŸè»½é‡ãª3Dé¢¨ãƒ‡ãƒ¢ã€‚å³åº§ã«å‹•ä½œã—ã€æœ¬æ ¼çš„ãªThree.jsã®å¯èƒ½æ€§ã‚’ä½“é¨“ã§ãã¾ã™ã€‚
                </div>
            </div>
            
            <div class="controls-info">
                ã‚¯ãƒªãƒƒã‚¯: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³<br>
                ãƒœã‚¿ãƒ³: å„ç¨®æ“ä½œ<br>
                è»½é‡ç‰ˆã§é«˜é€Ÿå‹•ä½œ
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>
    
    <script>
        // è»½é‡3Dã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆCanvas 2Dä½¿ç”¨ï¼‰
        const canvas = document.getElementById('quickCanvas');
        const ctx = canvas.getContext('2d');
        
        let currentScene = 'demo';
        let rotation = 0;
        let zoom = 1;
        let objects = [];
        let animationId;
        let isWireframe = false;
        let currentColor = '#4ecdc4';
        let lighting = 0.8;
        
        // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºè¨­å®š
        function resizeCanvas() {
            canvas.width = canvas.clientWidth;
            canvas.height = canvas.clientHeight;
        }
        
        // 3Dåº§æ¨™ã‹ã‚‰2Dåº§æ¨™ã¸ã®å¤‰æ›ï¼ˆç°¡æ˜“æŠ•å½±ï¼‰
        function project3D(x, y, z) {
            const perspective = 400;
            const distance = perspective + z;
            
            return {
                x: canvas.width / 2 + (x * perspective / distance) * zoom,
                y: canvas.height / 2 + (y * perspective / distance) * zoom,
                scale: perspective / distance * zoom
            };
        }
        
        // ç«‹æ–¹ä½“ã‚’æç”»
        function drawCube(x, y, z, size, color, wireframe = false) {
            const vertices = [
                [-size, -size, -size], [size, -size, -size], [size, size, -size], [-size, size, -size],
                [-size, -size, size], [size, -size, size], [size, size, size], [-size, size, size]
            ];
            
            // å›è»¢é©ç”¨
            const rotatedVertices = vertices.map(v => {
                const cos = Math.cos(rotation);
                const sin = Math.sin(rotation);
                return [
                    v[0] * cos - v[2] * sin,
                    v[1],
                    v[0] * sin + v[2] * cos
                ];
            });
            
            // 2DæŠ•å½±
            const projectedVertices = rotatedVertices.map(v => 
                project3D(x + v[0], y + v[1], z + v[2])
            );
            
            // é¢ã‚’æç”»
            const faces = [
                [0, 1, 2, 3], [4, 7, 6, 5], [0, 4, 5, 1],
                [2, 6, 7, 3], [0, 3, 7, 4], [1, 5, 6, 2]
            ];
            
            faces.forEach((face, index) => {
                const brightness = 0.3 + (index * 0.1) * lighting;
                ctx.fillStyle = wireframe ? 'transparent' : adjustColor(color, brightness);
                ctx.strokeStyle = color;
                ctx.lineWidth = wireframe ? 2 : 1;
                
                ctx.beginPath();
                ctx.moveTo(projectedVertices[face[0]].x, projectedVertices[face[0]].y);
                
                face.forEach(vertexIndex => {
                    ctx.lineTo(projectedVertices[vertexIndex].x, projectedVertices[vertexIndex].y);
                });
                
                ctx.closePath();
                
                if (!wireframe) ctx.fill();
                ctx.stroke();
            });
        }
        
        // è‰²ã®æ˜åº¦èª¿æ•´
        function adjustColor(color, brightness) {
            const rgb = hexToRgb(color);
            if (!rgb) return color;
            
            return `rgb(${Math.floor(rgb.r * brightness)}, ${Math.floor(rgb.g * brightness)}, ${Math.floor(rgb.b * brightness)})`;
        }
        
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }
        
        // ã‚·ãƒ¼ãƒ³ã‚’æç”»
        function drawScene() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#1a1a2e');
            gradient.addColorStop(1, '#16213e');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æç”»
            objects.forEach(obj => {
                drawCube(obj.x, obj.y, obj.z, obj.size, obj.color, isWireframe);
            });
            
            // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±
            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
            ctx.font = '12px monospace';
            ctx.fillText(`FPS: 60+ | Objects: ${objects.length} | Mode: è»½é‡ç‰ˆ`, 10, 20);
        }
        
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ—
        function animate() {
            rotation += 0.01;
            
            // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            objects.forEach(obj => {
                if (obj.animated) {
                    obj.y += Math.sin(Date.now() * 0.003 + obj.offset) * 0.1;
                }
            });
            
            drawScene();
            animationId = requestAnimationFrame(animate);
        }
        
        // åˆæœŸåŒ–
        function init() {
            resizeCanvas();
            
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚·ãƒ¼ãƒ³
            objects = [
                { x: 0, y: 0, z: 0, size: 50, color: currentColor, animated: false, offset: 0 },
                { x: -100, y: -30, z: -50, size: 30, color: '#ff6b6b', animated: false, offset: 1 },
                { x: 100, y: 20, z: -30, size: 40, color: '#ffd700', animated: false, offset: 2 }
            ];
            
            animate();
            showNotification('âš¡ è»½é‡3Dãƒ‡ãƒ¢ãŒèµ·å‹•ã—ã¾ã—ãŸï¼');
        }
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
        function startQuickDemo() {
            showNotification('ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ãƒ‡ãƒ¢é–‹å§‹ï¼');
            objects.forEach(obj => obj.animated = true);
        }
        
        function showSofa() {
            showLoading(true);
            setTimeout(() => {
                objects = [
                    { x: 0, y: 0, z: 0, size: 80, color: '#8B4513', animated: false, offset: 0 },
                    { x: -60, y: -20, z: 20, size: 20, color: '#DEB887', animated: false, offset: 1 },
                    { x: 0, y: -20, z: 20, size: 20, color: '#DEB887', animated: false, offset: 2 },
                    { x: 60, y: -20, z: 20, size: 20, color: '#DEB887', animated: false, offset: 3 }
                ];
                updateSceneInfo('ğŸ›‹ï¸ B&B Italiaã‚½ãƒ•ã‚¡', 'ã‚¯ãƒªãƒƒã‚¯ã—ã¦åº§ã£ã¦ã¿ã¦ãã ã•ã„ï¼æœ¬æ ¼çš„ãªThree.jsã§ã¯å®Ÿéš›ã«åº§ã‚Œã¾ã™ã€‚');
                showLoading(false);
                showNotification('ğŸ›‹ï¸ ã‚½ãƒ•ã‚¡ã‚·ãƒ¼ãƒ³ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸï¼');
            }, 500);
        }
        
        function showCity() {
            showLoading(true);
            setTimeout(() => {
                objects = [];
                for (let i = 0; i < 15; i++) {
                    objects.push({
                        x: (Math.random() - 0.5) * 400,
                        y: Math.random() * -100 - 50,
                        z: (Math.random() - 0.5) * 300,
                        size: Math.random() * 40 + 20,
                        color: `hsl(${Math.random() * 60 + 200}, 70%, 50%)`,
                        animated: false,
                        offset: i
                    });
                }
                updateSceneInfo('ğŸ™ï¸ ã‚¦ã‚©ãƒ³ãƒ»ã‚«ãƒ¼ãƒ¯ã‚¤é¦™æ¸¯', 'ãƒã‚ªãƒ³ãŒè¼ãé›¨ã®å¤œã®é¦™æ¸¯ã€‚æ˜ ç”»ã®ã‚ˆã†ãªä¸–ç•Œè¦³ã§ã™ã€‚');
                showLoading(false);
                showNotification('ğŸ™ï¸ é¦™æ¸¯ã®å¤œæ™¯ã‚’ç”Ÿæˆã—ã¾ã—ãŸï¼');
            }, 800);
        }
        
        function showRoom() {
            showLoading(true);
            setTimeout(() => {
                objects = [
                    { x: 0, y: -80, z: 0, size: 120, color: '#DEB887', animated: false, offset: 0 }, // åºŠ
                    { x: -80, y: 0, z: 0, size: 60, color: '#8B4513', animated: false, offset: 1 }, // ãƒ™ãƒƒãƒ‰
                    { x: 80, y: -20, z: 50, size: 40, color: '#654321', animated: false, offset: 2 }, // ãƒ‡ã‚¹ã‚¯
                    { x: 80, y: 20, z: 50, size: 25, color: '#2F4F4F', animated: false, offset: 3 }, // æ¤…å­
                    { x: -80, y: 40, z: -60, size: 30, color: '#8B4513', animated: false, offset: 4 } // æœ¬æ£š
                ];
                updateSceneInfo('ğŸ  ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼ãƒ ', 'å®¶å…·ã‚’ã‚¯ãƒªãƒƒã‚¯ã§ç§»å‹•å¯èƒ½ã€‚å®Ÿéš›ã®Three.jsã§ã¯å®Œå…¨ãªã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãŒå¯èƒ½ã§ã™ã€‚');
                showLoading(false);
                showNotification('ğŸ  éƒ¨å±‹è¨­è¨ˆãƒ¢ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã—ãŸï¼');
            }, 600);
        }
        
        function showFuture() {
            showLoading(true);
            setTimeout(() => {
                objects = [];
                for (let i = 0; i < 20; i++) {
                    objects.push({
                        x: (Math.random() - 0.5) * 500,
                        y: Math.random() * 200 - 100,
                        z: (Math.random() - 0.5) * 400,
                        size: Math.random() * 30 + 15,
                        color: `hsl(${Math.random() * 100 + 250}, 80%, 60%)`,
                        animated: true,
                        offset: i * 0.5
                    });
                }
                updateSceneInfo('ğŸš€ ã‚µã‚¤ãƒãƒ¼ãƒ‘ãƒ³ã‚¯éƒ½å¸‚', '2080å¹´ã®æœªæ¥éƒ½å¸‚ã€‚ç©ºé£›ã¶è»Šã¨ãƒ›ãƒ­ã‚°ãƒ©ãƒ åºƒå‘ŠãŒè¼ã„ã¦ã„ã¾ã™ã€‚');
                showLoading(false);
                showNotification('ğŸš€ æœªæ¥éƒ½å¸‚ã«ãƒ¯ãƒ¼ãƒ—ã—ã¾ã—ãŸï¼');
            }, 700);
        }
        
        function rotateView() {
            rotation += 0.5;
            showNotification('ğŸŒ€ è¦–ç‚¹ã‚’å›è»¢ã—ã¾ã—ãŸ');
        }
        
        function zoomIn() {
            zoom = Math.min(zoom * 1.2, 3);
            showNotification('ğŸ” ã‚ºãƒ¼ãƒ ã‚¤ãƒ³');
        }
        
        function zoomOut() {
            zoom = Math.max(zoom * 0.8, 0.3);
            showNotification('ğŸ” ã‚ºãƒ¼ãƒ ã‚¢ã‚¦ãƒˆ');
        }
        
        function resetView() {
            rotation = 0;
            zoom = 1;
            showNotification('ğŸ¯ è¦–ç‚¹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ');
        }
        
        function changeColor() {
            const colors = ['#4ecdc4', '#ff6b6b', '#ffd700', '#9b59b6', '#e67e22', '#2ecc71'];
            currentColor = colors[Math.floor(Math.random() * colors.length)];
            objects.forEach(obj => {
                if (obj.x === 0 && obj.y <= 10 && obj.z <= 10) {
                    obj.color = currentColor;
                }
            });
            showNotification('ğŸŒˆ è‰²ã‚’å¤‰æ›´ã—ã¾ã—ãŸ');
        }
        
        function addAnimation() {
            objects.forEach(obj => obj.animated = !obj.animated);
            showNotification(objects[0].animated ? 'âœ¨ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹' : 'â¸ï¸ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åœæ­¢');
        }
        
        function toggleWireframe() {
            isWireframe = !isWireframe;
            showNotification(isWireframe ? 'ğŸ”² ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ  ON' : 'ğŸ”² ã‚½ãƒªãƒƒãƒ‰è¡¨ç¤º ON');
        }
        
        function addLighting() {
            lighting = lighting === 0.8 ? 1.2 : 0.8;
            showNotification(lighting > 1 ? 'ğŸ’¡ æ˜ã‚‹ã„ç…§æ˜' : 'ğŸŒ™ æš—ã„ç…§æ˜');
        }
        
        function generateCode() {
            showNotification('ğŸ“ Blenderã‚³ãƒ¼ãƒ‰ç”Ÿæˆä¸­...');
            setTimeout(() => {
                const code = `# Claudeè»½é‡ãƒ‡ãƒ¢ã‹ã‚‰ç”Ÿæˆã•ã‚ŒãŸBlenderã‚³ãƒ¼ãƒ‰
import bpy

# æ—¢å­˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å‰Šé™¤
bpy.ops.object.select_all(action='SELECT')
bpy.ops.object.delete(use_global=False)

${objects.map((obj, index) => `
# ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ ${index + 1}
bpy.ops.mesh.primitive_cube_add(location=(${(obj.x/50).toFixed(2)}, ${(obj.z/50).toFixed(2)}, ${(obj.y/50).toFixed(2)}))
cube_${index} = bpy.context.active_object
cube_${index}.scale = (${(obj.size/50).toFixed(2)}, ${(obj.size/50).toFixed(2)}, ${(obj.size/50).toFixed(2)})
`).join('')}

print("è»½é‡ãƒ‡ãƒ¢ã‚·ãƒ¼ãƒ³ãŒBlenderã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸï¼")`;

                downloadFile(code, 'lightweight_scene.py');
                showNotification('ğŸ“ Blenderã‚³ãƒ¼ãƒ‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼');
            }, 1000);
        }
        
        function explainScene() {
            const explanations = [
                'ğŸ¤– ã“ã®è»½é‡ãƒ‡ãƒ¢ã¯ã€é‡ã„Three.jsã‚’ä½¿ã‚ãšã«Canvas 2Dã§3Dé¢¨ä½“é¨“ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚',
                'ğŸ’¡ å®Ÿéš›ã®Three.jsã§ã¯ã€ã“ã®100å€ã®ã‚¯ã‚ªãƒªãƒ†ã‚£ã¨ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãŒå¯èƒ½ã§ã™ã€‚',
                'âš¡ 60FPSä»¥ä¸Šã®æ»‘ã‚‰ã‹ãªå‹•ä½œã¨ã€VRå¯¾å¿œã€ç‰©ç†æ¼”ç®—ãªã©ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚',
                'ğŸ¯ Claudeé€£æºã«ã‚ˆã‚Šã€ã€Œã‚‚ã£ã¨è±ªè¯ã«ã€ã€Œé›¨ã‚’é™ã‚‰ã›ã¦ã€ãªã©ã®æŒ‡ç¤ºã§å³åº§ã«å¤‰æ›´å¯èƒ½ã§ã™ã€‚'
            ];
            
            const randomExplanation = explanations[Math.floor(Math.random() * explanations.length)];
            showNotification(randomExplanation);
        }
        
        function suggestImprovement() {
            const suggestions = [
                'ğŸ’ å®Ÿéš›ã®Three.jsã§ãƒ†ã‚¯ã‚¹ãƒãƒ£ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’è¿½åŠ ã™ã‚‹ã¨ã€ã‚ˆã‚Šãƒªã‚¢ãƒ«ã«ãªã‚Šã¾ã™ã€‚',
                'ğŸŒŸ ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã§é›ªã‚„é›¨ã®åŠ¹æœã‚’è¿½åŠ ã§ãã¾ã™ã€‚',
                'ğŸ”Š Web Audio APIã§3DéŸ³éŸ¿åŠ¹æœã‚’è¿½åŠ ã™ã‚‹ã¨è‡¨å ´æ„ŸãŒå¢—ã—ã¾ã™ã€‚',
                'ğŸ¥½ WebXRã§VR/ARå¯¾å¿œã«ã™ã‚‹ã¨ã€å®Œå…¨ã«æ²¡å…¥ã§ãã¾ã™ã€‚',
                'ğŸ¤– ç‰©ç†ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆCannon.jsï¼‰ã§é‡åŠ›ã‚„è¡çªåˆ¤å®šã‚’è¿½åŠ ã§ãã¾ã™ã€‚'
            ];
            
            const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
            showNotification(randomSuggestion);
        }
        
        function updateSceneInfo(title, description) {
            document.getElementById('sceneInfo').innerHTML = `
                <div class="overlay-title">${title}</div>
                <div class="overlay-description">${description}</div>
            `;
        }
        
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        function showLoading(show) {
            document.getElementById('loadingSpinner').style.display = show ? 'block' : 'none';
        }
        
        function downloadFile(content, filename) {
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        canvas.addEventListener('click', (event) => {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            
            // ã‚¯ãƒªãƒƒã‚¯ä½ç½®ã«æ–°ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ 
            objects.push({
                x: (x - canvas.width / 2) * 0.5,
                y: (y - canvas.height / 2) * 0.5,
                z: Math.random() * 100 - 50,
                size: Math.random() * 30 + 20,
                color: `hsl(${Math.random() * 360}, 70%, 60%)`,
                animated: true,
                offset: Math.random() * 10
            });
            
            showNotification('âœ¨ æ–°ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ ã—ã¾ã—ãŸï¼');
        });
        
        window.addEventListener('resize', resizeCanvas);
        
        // åˆæœŸåŒ–å®Ÿè¡Œ
        init();
    </script>
</body>
</html>